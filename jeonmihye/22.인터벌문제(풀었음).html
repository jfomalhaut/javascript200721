<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!--
        인증번호 보내기
        버튼을 누르면

        버튼이 사라지고, (어려우면 skip)

        100초 카운트가 뜨고,
        0초가 되면

        alert로 실패!가 뜨면서
        다시 인증번호 보내기 버튼이 생깁니다.

        send.style.display="none"
    -->
    <button id="start">인증번호 보내기</button>
    <h1 id="timeTxt">제한 시간: <span id="time">0</span></h1>
    
    <script>
        const TIME = 1000;
        var start = document.getElementById('start');
        var time = document.getElementById('time');
        var timeTxt = document.getElementById('timeTxt');
        var value = 4;
        var interval;


        timeTxt.style.display = "none"; //카운트 출력 태그 숨기기


        start.onclick = function() {

            hideTag(); //버튼 사라지고 
            timeTxt.style.display = "block"; // 카운트가 span 태그에 출력된다.
            countPrint();

        }

        function countPrint() { // 카운트 출력 함수

            clearInterval(interval); // 버튼 여러 번 누를 시 함수 호출 누적 방지
            interval = setInterval(function() {
                timer();
            }, TIME);

        }

        function timer() { // 숫자 카운트 값 생성 함수
            value--;
            time.innerHTML = value; // span 태그에 숫자(value) 로그

            if(value === 0) { // 만약 숫자가 0이면 reTry(); 함수 출력
                reTry();
            }
        }

        function reTry() { // 제한시간 초과 시(0초 시) 다시 카운트 출력

            alert('인증이 실패되었습니다. 다시 시도해주세요.');
            clearInterval(interval); // 0초가 되면 카운트 중단

            showTag(); // 인증 실패 시 다시 키운트 표기 부분 없어지고, 버튼만 출력

        }

        function hideTag() {
            start.style.display = "none";
        }

        function showTag() {
            value = "4"; // 재인증(id=start) 버튼 다시 누를 시 카운트 값 4로 설정
            timeTxt.style.display = "none"; // h1, span 태그 숨김
            start.style.display = "block"; // 버튼은 보이게 처리
        }

    </script>
</body>
</html>